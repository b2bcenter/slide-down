/*!
 * jQuery Slide-down v.1.0.0
 * http://b2bcenter.github.io/slide-down/
 *
 * Author
 * Vladimir Shleyze v.shleyze@mail.ru
 *
 * Released under the MIT license
 * https://github.com/b2bcenter/slide-down/blob/master/LICENSE
 *
 * Date: 2016.04.07
 */
!function(t,a,e,n){var i="slideDown",s=function(){var t,a=e.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(a.style[t]!==n)return i[t]}(),o={onTransitionEnd:function(t,a){var e=this;t.on(s,function(n){n.target==t[0]&&(t.off(s),e.execute(a))}),s||e.execute(a)},toggleTemporaryClass:function(t,a){var e=this,n=t.children();s&&t.addClass(a),e.onTransitionEnd(n,function(){t.removeClass(a)})},setOffset:function(a){t.each(a,function(){var a=t(this).children(),e=a.outerHeight();a.css("marginTop",-e)})},getElement:function(a,e){return"string"==typeof a?t("[data-"+e+"="+a+"]"):"object"==typeof a&&a.data(e.toLowerCase())!=n?t(a):void 0},execute:function(t){t&&"function"==typeof t&&t()}};t[i]={defaults:{target_data:"slidedown-target",trigger_data:"slidedown-trigger",animation_class:"slide_down--animating",active_class:"slide_down--active",trigger_active_class:"active"},setOptions:function(a){this.options=t.extend(!0,{},this.defaults,a)},init:function(){var a=this;a.setOptions({}),o.setOffset(t("[data-"+a.options.target_data+"]")),a.bindEvents()},open:function(a,e){var n=this,i=n.options,s=i.active_class,r=i.animation_class,c=i.trigger_active_class,d=o.getElement(a,i.target_data),l=d.children(),g=t("[data-"+i.target_data+"]").filter("[data-sync]").not(d),f=t("[data-"+i.trigger_data+'="'+d.data(i.target_data.toLowerCase())+'"]'),u=d.is("[data-sync]");0==d.outerHeight()&&(f.addClass(c),o.toggleTemporaryClass(d,r),o.onTransitionEnd(l,function(){o.execute(e)}),u?n.closeAll(g,function(){d.addClass(s)}):d.addClass(s))},close:function(a,e){var n=this,i=n.options,s=i.active_class,r=i.animation_class,c=i.trigger_active_class,d=o.getElement(a,i.target_data),l=d.children(),g=t("[data-"+i.trigger_data+'="'+d.data(i.target_data.toLowerCase())+'"]');g.removeClass(c),o.toggleTemporaryClass(d,r),o.onTransitionEnd(l,function(){o.execute(e)}),d.removeClass(s)},closeAll:function(a,e){var n=this,i=n.options,s=i.active_class,r=i.animation_class,c=i.trigger_active_class,a=a||t("[data-"+i.target_data+"]"),d=a.filter("."+s);t.each(d,function(a,n){var l=t(n),g=l.children(),f=t("[data-"+i.trigger_data+'="'+l.data(i.target_data.toLowerCase())+'"]');o.toggleTemporaryClass(l,r),a===d.length-1?o.onTransitionEnd(g,function(){o.execute(e),f.removeClass(c)}):f.removeClass(c),l.removeClass(s)}),0==d.length&&o.execute(e)},bindEvents:function(){var a=this,e=a.options,n=e.active_class,i=t("body");i.on("click","[data-"+e.trigger_data+"]",function(){var i=t(this).data(e.trigger_data.toLowerCase()),s=o.getElement(i,e.target_data);o.setOffset(s),s.hasClass(n)?a.close(i):a.open(i)}),i.on("keyup",function(t){27==t.keyCode&&a.closeAll()})}},t(function(){t[i].init()})}(jQuery,window,document);